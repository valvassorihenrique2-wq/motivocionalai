<!--<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Imagens Gemini (via Netlify Function)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            text-align: center;
        }
        textarea {
            width: calc(100% - 20px);
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            resize: vertical;
            min-height: 80px;
        }
        button {
            padding: 12px 25px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #0056b3;
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        #result-container {
            margin-top: 25px;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }
        #result-image {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-top: 15px;
            display: none; /* Escondido por padrão */
        }
        #loading-message {
            margin-top: 15px;
            color: #555;
            font-style: italic;
            display: none; /* Escondido por padrão */
        }
        #error-message {
            margin-top: 15px;
            color: #d9534f;
            font-weight: bold;
            display: none; /* Escondido por padrão */
        }
        /* No caso da API Gemini, não temos os mesmos sliders de Width/Height/Seed etc.
           diretamente no prompt. Vou deixar os campos, mas eles não serão enviados
           para a Netlify Function a menos que você os adicione no JSON.
           Para manter a simplicidade com a API Gemini inicial, foco apenas no prompt. */
        .params-grid {
            display: none; /* Oculta os parâmetros que não são diretamente suportados pelo Gemini Flash text-to-image de forma simples */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Gerador de Imagens Gemini (Beta)</h1>

        <label for="prompt">Prompt (Descrição da Imagem):</label>
        <textarea id="prompt" placeholder="Ex: A futuristic city at sunset, highly detailed, cyberpunk art" rows="4"></textarea>

        <div class="params-grid">
            <div>
                <label for="width">Largura (px):</label>
                <input type="number" id="width" value="512" min="256" max="2048" step="64" disabled>
            </div>
            <div>
                <label for="height">Altura (px):</label>
                <input type="number" id="height" value="512" min="256" max="2048" step="64" disabled>
            </div>
            <div>
                <label for="seed">Seed (0 para aleatório):</label>
                <input type="number" id="seed" value="0" min="0" disabled>
            </div>
            <div>
                <label for="num_inference_steps">Passos de Inferência:</label>
                <input type="number" id="num_inference_steps" value="2" min="1" max="10" disabled>
            </div>
            <div>
                <label for="guidance_scale">Escala de Orientação:</label>
                <input type="number" id="guidance_scale" value="0" min="0" max="20" step="0.1" disabled>
            </div>
            <div>
                <label for="randomize_seed">Aleatorizar Seed:</label>
                <input type="checkbox" id="randomize_seed" checked disabled>
            </div>
        </div>

        <button id="generateBtn">Gerar Imagem</button>

        <div id="result-container">
            <p id="loading-message">Gerando imagem, por favor aguarde...</p>
            <p id="error-message"></p>
            <img id="result-image" alt="Imagem Gerada">
            </div>
    </div>

    <script>
        const promptInput = document.getElementById('prompt');
        const generateBtn = document.getElementById('generateBtn');
        const loadingMessage = document.getElementById('loading-message');
        const errorMessage = document.getElementById('error-message');
        const resultImage = document.getElementById('result-image');

        generateBtn.addEventListener('click', async () => {
            const prompt = promptInput.value;

            // Validação simples
            if (!prompt) {
                errorMessage.textContent = 'Por favor, digite um prompt para a imagem.';
                errorMessage.style.display = 'block';
                return;
            }

            // Resetar estados
            loadingMessage.style.display = 'block';
            errorMessage.style.display = 'none';
            resultImage.style.display = 'none';
            resultImage.src = ''; // Limpa a imagem anterior
            generateBtn.disabled = true; // Desabilita o botão

            try {
                // Chama a sua Netlify Function
                const response = await fetch('/api/generate-image-gemini', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ prompt: prompt }),
                });

                const data = await response.json();

                if (response.ok) {
                    if (data.image) {
                        resultImage.src = data.image;
                        resultImage.style.display = 'block';
                    } else {
                        errorMessage.textContent = 'Erro inesperado: Nenhuma imagem retornada pela função Netlify.';
                        errorMessage.style.display = 'block';
                        console.error('Resposta da função Netlify:', data);
                    }
                } else {
                    // Erro vindo da Netlify Function (que por sua vez repassa o erro da API Gemini)
                    errorMessage.textContent = data.error || 'Erro desconhecido ao gerar imagem.';
                    errorMessage.style.display = 'block';
                    console.error('Erro da Netlify Function:', data);
                }

            } catch (error) {
                // Erros de rede ou outros erros inesperados no frontend
                errorMessage.textContent = 'Erro de rede ou conexão. Verifique sua internet ou tente novamente.';
                errorMessage.style.display = 'block';
                console.error('Erro de Fetch no Frontend:', error);
            } finally {
                loadingMessage.style.display = 'none';
                generateBtn.disabled = false; // Habilita o botão novamente
            }
        });
    </script>
</body>
</html>-->